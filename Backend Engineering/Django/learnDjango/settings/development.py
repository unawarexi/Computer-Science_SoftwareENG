"""
Django Development Settings
===========================
Settings for local development environment.
"""

from .base import *  # noqa: F401, F403

# =============================================================================
# DEBUG
# =============================================================================

DEBUG = True

# =============================================================================
# ALLOWED HOSTS
# =============================================================================

ALLOWED_HOSTS = ["localhost", "127.0.0.1", "0.0.0.0", "*"]

# =============================================================================
# INSTALLED APPS - DEV TOOLS
# =============================================================================

INSTALLED_APPS += [
    "debug_toolbar",
]

# =============================================================================
# MIDDLEWARE - DEV TOOLS
# =============================================================================

MIDDLEWARE = [
    "debug_toolbar.middleware.DebugToolbarMiddleware",
] + MIDDLEWARE

# =============================================================================
# DEBUG TOOLBAR
# =============================================================================

INTERNAL_IPS = ["127.0.0.1", "localhost"]

DEBUG_TOOLBAR_CONFIG = {
    "SHOW_TOOLBAR_CALLBACK": lambda request: DEBUG,
}

# =============================================================================
# EMAIL
# =============================================================================

EMAIL_BACKEND = "django.core.mail.backends.console.EmailBackend"

# =============================================================================
# CORS - Allow all in development
# =============================================================================

CORS_ALLOW_ALL_ORIGINS = True

# =============================================================================
# REST FRAMEWORK - Dev Settings
# =============================================================================

REST_FRAMEWORK["DEFAULT_RENDERER_CLASSES"] = [
    "rest_framework.renderers.JSONRenderer",
    "rest_framework.renderers.BrowsableAPIRenderer",
]

# =============================================================================
# AI CONFIG - Verbose in development
# =============================================================================

AI_CONFIG["AGENT_VERBOSE"] = True

# =============================================================================
# LOGGING - More verbose in development
# =============================================================================

LOGGING["loggers"]["django"]["level"] = "DEBUG"
LOGGING["loggers"]["ai"]["level"] = "DEBUG"

# =============================================================================
# CACHING - Local memory cache for development
# =============================================================================

if env("REDIS_URL", default="") == "":
    CACHES = {
        "default": {
            "BACKEND": "django.core.cache.backends.locmem.LocMemCache",
        }
    }
